## DCL-数据控制
```
DCL（Data Control Language）数据控制语言
权限与安全控制：给谁什么权限、收回权限。
常见语句：
GRANT 授权
REVOKE 回收权限
（MySQL 还有 CREATE USER、ALTER USER、DROP USER 等账户管理语句，常跟 DCL 一起学）
```

### 1. 用户操作
```
# 查询用户，user表存储在数据库mysql中，需要先更改数据库，use mysql;
select * from user;

# 创建用户
create user 'user_name'@'host_name' identified by 'password';  # 'host_name'为'%', 可以访问任何主机, 应用于远程连接用户

# 修改用户密码
alter user 'user_name'@'host_name' identified with mysql_native_password by 'new_password';

# 删除用户
drop user 'user_name'@'host_name';
```

### 2. 权限操作
```
all						所有权限
select					查询数据
insert					插入数据
update					修改数据
delete					删除数据
alter					修改表
drop					删除数据库/表/视图
create					创建数据库/表
grant option            使用户在表中拥有赋予自身权限的能力

# 查询权限
show grants for 'user_name'@'host_name';

# 查看当前用户权限
show grants;

# 赋予权限
grants privilege on database.table to 'user_name'@'host_name';  # 如果要赋予所有数据库所有表的话，可以写成*.*

# 赋予全部权限
grant all on * to 'user_name'@'host_name';

# 撤销权限
revoke privilege no database.table from 'user_name'@'host_name';

# 刷新权限
flush privileges;
```

### 角色操作
在mysql中，角色相当于linux中的权限组，role不能登录
```
# 创建
create role 'role_readonly';

# 授权(和用户一样)
grant select on *.* to 'role_readonly';

# 将自身权限授予其他用户
grant 'role_readonly' to 'chen'@'localhost';

# 激活角色(一定要注意激活角色)
set default role 'role_readonly' to 'chen'@'localhost';

# 倘若这是登录chen用户
SELECT CURRENT_ROLE();
# 查看当前用户使用的权限对象，会看到是role_readonly

# 注意：一旦更改了role权限，其所有绑定该角色的用户权限都会立即改变
```

### demo
```
# 切换成mysql数据库
use mysql;
# 查看user表
select * from user;
# 创建普通用户chen,密码为12346
create user 'chen'@'localhost' identified by '123456';
# 查询用户chen是否存在
SELECT user, host FROM mysql.user WHERE user = 'chen';
# 注意，管理员root才拥有修改用户密码的权限。
alter user 'chen'@'localhost' identified by '123456';
# 查看最近密码修改的时间
select user.User, user.password_last_changed from user;
# 查看权限
show grants for 'chen'@'localhost';
# 刷新权限
FLUSH PRIVILEGES;
# 查看当前登录的账号
SELECT CURRENT_USER(), USER();
```