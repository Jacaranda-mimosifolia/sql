### 1. Mysql体系结构
```
1. 连接层（Connection Layer）
作用：
    接收客户端连接（TCP）
    用户身份认证、权限校验
    连接管理、线程处理
    SSL/安全控制
常见组件：
    Connection Pool
    Thread Cache
    
2. 服务层（Server Layer）
作用：
    SQL 接口（DML / DDL / DCL）
    SQL 解析（Parser）
    查询优化（Optimizer）
    执行器（Executor）
    内置函数、存储过程、触发器、视图
和存储引擎无关，所有引擎共享这一层

3. 引擎层（Storage Engine Layer）
作用：
    负责数据的 读 / 写 / 索引 / 锁
    通过统一 API 与 Server 层交互
真正决定性能、事务、锁机制

4. 存储层（File System）
作用：
    将数据最终落盘到操作系统文件系统
    redo / undo / binlog 文件
严格来说：InnoDB 自己管理文件 + OS 文件系统

连接层：连接上层的客户端，连接处理、授权认证、服务安全
服务层：sql接口、分析、优化、查询、函数
引擎层：负责数据的存储和提取，服务器可以通过API和存储引擎通信
存储层：将数据存储到文件系统，并与存储引擎交互
```

### 2. 存储引擎
```
存储引擎是基于表的数据存储、建立索引、更新、查询，是一种表类型

# 查看Mysql中所有的存储引擎
show engines;

# 创表指定存储引擎
create table t1(
    id varchar(10),
    name varchar(10)
)engine = myisam;

# InnoDB:可靠性、高性能,默认存储引擎
✅ 支持事务（ACID）
✅ 行级锁
✅ 外键
✅ MVCC
✅ 崩溃恢复
❌ 不支持全文索引（MySQL 5.6 之前）
# 文件后缀:.ibd
# InnoDB逻辑存储结构:
Tablespace（表空间）
 └── Segment（段）
     └── Extent（区） 1MB
         └── Page（页） 16KB
             └── Row（行）


# Myisam:早期默认存储引擎
❌ 不支持事务
❌ 不支持外键
✅ 表级锁
✅ 查询速度快（读多写少）
❌ 崩溃恢复能力差
# 文件后缀：
.sdi：存储表结构  json
.myd：存储数据   二进制
.myi：存储索引   二进制

# Memory：
数据存储在内存
断电丢失
表结构持久化
速度极快
默认 HASH 索引
# 文件后缀：
.sdi
用途：
临时表
会话级缓存
中间计算结果
```
